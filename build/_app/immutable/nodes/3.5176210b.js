import{S as G,i as H,s as J,k as l,q as B,a as D,l as o,m as i,r as P,h as s,c as g,n as q,b as N,E as a,F as j,M as F,J as L,o as O}from"../chunks/index.dec1645f.js";import{g as z}from"../chunks/navigation.ed32ecc9.js";import{B as Q}from"../chunks/config.356a930e.js";function V(h){let r,v,p,n,_,u,t,k,w,f,y,m,$,b,d,x,A,S;return{c(){r=l("h1"),v=B("admin"),p=D(),n=l("table"),_=l("tr"),u=l("td"),t=l("p"),k=B("api_key:"),w=D(),f=l("tr"),y=l("td"),m=l("input"),$=D(),b=l("td"),d=l("button"),x=B("submit"),this.h()},l(e){r=o(e,"H1",{});var c=i(r);v=P(c,"admin"),c.forEach(s),p=g(e),n=o(e,"TABLE",{});var E=i(n);_=o(E,"TR",{});var C=i(_);u=o(C,"TD",{});var I=i(u);t=o(I,"P",{class:!0});var K=i(t);k=P(K,"api_key:"),K.forEach(s),I.forEach(s),C.forEach(s),w=g(E),f=o(E,"TR",{});var T=i(f);y=o(T,"TD",{});var M=i(y);m=o(M,"INPUT",{type:!0,name:!0}),M.forEach(s),$=g(T),b=o(T,"TD",{});var R=i(b);d=o(R,"BUTTON",{});var U=i(d);x=P(U,"submit"),U.forEach(s),R.forEach(s),T.forEach(s),E.forEach(s),this.h()},h(){q(t,"class","svelte-1xyjwo"),q(m,"type","password"),q(m,"name","api-key"),d.disabled=h[0]},m(e,c){N(e,r,c),a(r,v),N(e,p,c),N(e,n,c),a(n,_),a(_,u),a(u,t),a(t,k),a(n,w),a(n,f),a(f,y),a(y,m),a(f,$),a(f,b),a(b,d),a(d,x),A||(S=[j(m,"keyup",h[1]),j(d,"click",h[2])],A=!0)},p(e,[c]){c&1&&(d.disabled=e[0])},i:F,o:F,d(e){e&&s(r),e&&s(p),e&&s(n),A=!1,L(S)}}}function W(h,r,v){var p=!0;let n;function _(t){t.key==="Enter"&&u(),v(0,p=n.value.length==0)}async function u(){await fetch(`${Q}/auth`,{method:"GET",headers:{"Api-Key":n.value}}).then(t=>t.status==401?null:t.text()).then(t=>{t!=null?(window.alert("you are authenticated"),document.cookie="token="+t,z("/new")):window.alert("invalid key")})}return O(()=>{n=document.querySelector("input")}),[p,_,u]}class tt extends G{constructor(r){super(),H(this,r,W,V,J,{})}}export{tt as component};
