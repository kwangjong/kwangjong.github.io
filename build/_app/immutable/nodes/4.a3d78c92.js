import{S as L,i as N,s as O,k as _,q as v,a as y,Q as q,e as B,l as P,m as k,r as E,h as u,c as w,R as A,n as T,b as $,E as f,F as x,M as D,J as C,N as H}from"../chunks/index.dec1645f.js";import{g as S}from"../chunks/navigation.ed32ecc9.js";import{p as R}from"../chunks/stores.43a18bd7.js";import{g as j}from"../chunks/auth.59faee21.js";import{B as F}from"../chunks/config.356a930e.js";function G(i){let s,o,c,p,l,h,m,a,n,g,b;return{c(){s=_("div"),o=_("button"),c=v("Blog"),p=y(),l=_("button"),h=v("Tags"),m=y(),a=new q(!1),n=B(),this.h()},l(t){s=P(t,"DIV",{class:!0});var e=k(s);o=P(e,"BUTTON",{class:!0});var r=k(o);c=E(r,"Blog"),r.forEach(u),p=w(e),l=P(e,"BUTTON",{class:!0});var d=k(l);h=E(d,"Tags"),d.forEach(u),e.forEach(u),m=w(t),a=A(t,!1),n=B(),this.h()},h(){T(o,"class","blog"),T(l,"class","tags"),T(s,"class","blog-menu"),a.a=n},m(t,e){$(t,s,e),f(s,o),f(o,c),f(s,p),f(s,l),f(l,h),$(t,m,e),a.m(i[0],t,e),$(t,n,e),g||(b=[x(o,"click",i[2]),x(l,"click",i[3])],g=!0)},p(t,[e]){e&1&&a.p(t[0])},i:D,o:D,d(t){t&&u(s),t&&u(m),t&&u(n),t&&a.d(),g=!1,C(b)}}}function J(i,s,o){let c;H(i,R,a=>o(1,c=a));async function p(a,n){let b=j(),t=await fetch(`${F}/blog/list?tag=${n}&skip=${(a-1)*7}&numPost=7`,{method:"GET",headers:{Token:b??""}}).then(r=>r.json()),e='<ul class="blog-list">';return t.entries.forEach(r=>{let d=new Date(r.Date);var U={year:"numeric",month:"long",day:"numeric"};let I=d.toLocaleDateString("en-US",U);e+=`
            <li class="blog-entry">
                <h2 class="title"><button on:click={() => goto('${"/blog/"+r.Url}"')}">${r.Title}</button></h2>
                <time class="date" datetime="${d}" itemprop="datePublished">${I}</time>
            </li>
            `}),e+='</ul> <section id="post-navigator">',e+=a>1?`<button on:click={() => goto('/blog?page=${a-1}')}> &lt Newer </button>`:"",e+=t.hasNext?`<button on:click={() => goto('/blog?page=${a+1}')}> Older &gt </button>`:"",e+="</section>",e}let l="";const h=()=>S("/blog"),m=()=>S("/tags");return i.$$.update=()=>{i.$$.dirty&2&&(async()=>{const a=new URL(c.url),n=parseInt(a.searchParams.get("page")??"1"),g=a.searchParams.get("tag")??"";o(0,l=await p(n,g))})()},[l,c,h,m]}class W extends L{constructor(s){super(),N(this,s,J,G,O,{})}}export{W as component};
