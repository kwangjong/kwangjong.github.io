import{S as de,i as ue,s as pe,k as o,a as g,y as me,q as C,Q as fe,l as i,m as d,h as t,c as b,z as ve,r as L,n as c,N as Z,E as s,b as q,A as he,F as ee,L as _e,g as ke,d as ye,B as ge,R as be,o as we,T as Ee}from"../chunks/index.d92f3f85.js";import{S as Se,r as Te}from"../chunks/SyntaxHighlight.f064f222.js";new TextEncoder;const{document:H}=Ee;function xe(E){let l,_,U,r,S,f,V,T,n,m,a,w,v,u,h,x,F,K,$,M,z,k,D,Q,j,X,y,I,Y,J,O,W,B,G,te;return n=new Se({}),{c(){l=o("link"),_=o("script"),r=o("script"),f=o("script"),T=g(),me(n.$$.fragment),m=g(),a=o("h1"),w=C("editor"),v=g(),u=o("div"),h=o("div"),x=o("button"),F=C("edit"),K=g(),$=o("button"),M=C("preview"),z=g(),k=o("div"),D=o("div"),Q=g(),j=o("textarea"),X=g(),y=o("div"),I=o("button"),Y=C("cancel"),J=g(),O=o("button"),W=C("save"),this.h()},l(e){const p=fe("svelte-10tpdyr",H.head);l=i(p,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0}),_=i(p,"SCRIPT",{src:!0});var oe=d(_);oe.forEach(t),r=i(p,"SCRIPT",{src:!0});var ie=d(r);ie.forEach(t),f=i(p,"SCRIPT",{src:!0});var ce=d(f);ce.forEach(t),p.forEach(t),T=b(e),ve(n.$$.fragment,e),m=b(e),a=i(e,"H1",{class:!0});var se=d(a);w=L(se,"editor"),se.forEach(t),v=b(e),u=i(e,"DIV",{class:!0});var N=d(u);h=i(N,"DIV",{class:!0});var P=d(h);x=i(P,"BUTTON",{});var re=d(x);F=L(re,"edit"),re.forEach(t),K=b(P),$=i(P,"BUTTON",{});var ae=d($);M=L(ae,"preview"),ae.forEach(t),P.forEach(t),z=b(N),k=i(N,"DIV",{class:!0});var R=d(k);D=i(R,"DIV",{class:!0}),d(D).forEach(t),Q=b(R),j=i(R,"TEXTAREA",{class:!0}),d(j).forEach(t),R.forEach(t),X=b(N),y=i(N,"DIV",{class:!0});var A=d(y);I=i(A,"BUTTON",{onclick:!0});var ne=d(I);Y=L(ne,"cancel"),ne.forEach(t),J=b(A),O=i(A,"BUTTON",{});var le=d(O);W=L(le,"save"),le.forEach(t),A.forEach(t),N.forEach(t),this.h()},h(){c(l,"rel","stylesheet"),c(l,"href","https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css"),c(l,"integrity","sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X"),c(l,"crossorigin","anonymous"),Z(_.src,U="//cdn.jsdelivr.net/npm/marked/marked.min.js")||c(_,"src",U),Z(r.src,S="//cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js")||c(r,"src",S),Z(f.src,V="https://cdn.jsdelivr.net/npm/marked-katex-extension/lib/index.umd.js")||c(f,"src",V),c(a,"class","svelte-1c6afce"),c(h,"class","markdown-header"),c(D,"class","preview"),j.value=E[0],c(j,"class","svelte-1c6afce"),c(k,"class","markdown-body svelte-1c6afce"),c(I,"onclick","location.href='/blog'"),c(y,"class","markdown-footer"),c(u,"class","markdown-editor svelte-1c6afce")},m(e,p){s(H.head,l),s(H.head,_),s(H.head,r),s(H.head,f),q(e,T,p),he(n,e,p),q(e,m,p),q(e,a,p),s(a,w),q(e,v,p),q(e,u,p),s(u,h),s(h,x),s(x,F),s(h,K),s(h,$),s($,M),s(u,z),s(u,k),s(k,D),s(k,Q),s(k,j),s(u,X),s(u,y),s(y,I),s(I,Y),s(y,J),s(y,O),s(O,W),B=!0,G||(te=[ee(x,"click",E[2]),ee($,"click",E[1]),ee(O,"click",E[3])],G=!0)},p:_e,i(e){B||(ke(n.$$.fragment,e),B=!0)},o(e){ye(n.$$.fragment,e),B=!1},d(e){t(l),t(_),t(r),t(f),e&&t(T),ge(n,e),e&&t(m),e&&t(a),e&&t(v),e&&t(u),G=!1,be(te)}}}function $e(E){let l=new Date(Date.now()),U=`---
title: 
tags: [ ]
date: ${`${l.toISOString().split("T")[0]} ${l.toString().split(" ")[4]} -${l.toString().split("-")[1].slice(0,2)}:${l.toString().split("-")[1].slice(2,5)}`}
---
`,r,S;function f(){const n=/^---[\s\S]*?---\s*/m,m=r.value.replace(n,""),a={throwOnError:!1},w={mangle:!1,headerIds:!1};marked.use(markedKatex(a),w);let v=marked.parse(m);console.log(v),r.style.display="none",S.innerHTML=v,Te()}function V(){r.style.display="block",S.innerHTML=""}function T(){try{let n=r.value,m=n.split("---")[1],a=jsyaml.load(m);a.markdown=n;const w=/^---[\s\S]*?---\s*/m,v=r.value.replace(w,""),u={throwOnError:!1};marked.use(markedKatex(u)),a.html=marked.parse(v),a.url=`${a.date.toISOString().split("T")[0]}-${a.title.replaceAll(" ","-")}`;const h=fetch("http://104.154.96.6:8080/blog/",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}})}catch(n){window.alert(n.message)}}return we(()=>{r=document.querySelector("textarea"),S=document.querySelector(".preview"),r.addEventListener("keydown",n=>{if(n.key==="Tab"){const m=r.selectionStart,a=r.selectionEnd;r.value=r.value.substring(0,m)+"	"+r.value.substring(a),r.selectionStart=r.selectionEnd=m+1,n.preventDefault()}})}),[U,f,V,T]}class Oe extends de{constructor(l){super(),ue(this,l,$e,xe,pe,{})}}export{Oe as default};
