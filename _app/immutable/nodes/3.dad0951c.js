import{S as F,i as G,s as H,k as l,q as $,a as q,l as o,m as i,r as D,h as s,c as P,n as j,b as A,E as a,F as z,L as C,O as K,o as M}from"../chunks/index.158cc983.js";import{j as J}from"../chunks/singletons.b984bde3.js";const Q=J("goto");function V(m){let r,y,p,n,_,d,t,k,w,h,v,f,x,b,u,g,S,B;return{c(){r=l("h1"),y=$("admin"),p=q(),n=l("table"),_=l("tr"),d=l("td"),t=l("p"),k=$("api_key:"),w=q(),h=l("tr"),v=l("td"),f=l("input"),x=q(),b=l("td"),u=l("button"),g=$("submit"),this.h()},l(e){r=o(e,"H1",{});var c=i(r);y=D(c,"admin"),c.forEach(s),p=P(e),n=o(e,"TABLE",{});var E=i(n);_=o(E,"TR",{});var I=i(_);d=o(I,"TD",{});var L=i(d);t=o(L,"P",{class:!0});var N=i(t);k=D(N,"api_key:"),N.forEach(s),L.forEach(s),I.forEach(s),w=P(E),h=o(E,"TR",{});var T=i(h);v=o(T,"TD",{});var O=i(v);f=o(O,"INPUT",{type:!0,name:!0}),O.forEach(s),x=P(T),b=o(T,"TD",{});var R=i(b);u=o(R,"BUTTON",{});var U=i(u);g=D(U,"submit"),U.forEach(s),R.forEach(s),T.forEach(s),E.forEach(s),this.h()},h(){j(t,"class","svelte-1xyjwo"),j(f,"type","password"),j(f,"name","api-key"),u.disabled=m[0]},m(e,c){A(e,r,c),a(r,y),A(e,p,c),A(e,n,c),a(n,_),a(_,d),a(d,t),a(t,k),a(n,w),a(n,h),a(h,v),a(v,f),a(h,x),a(h,b),a(b,u),a(u,g),S||(B=[z(f,"keyup",m[1]),z(u,"click",m[2])],S=!0)},p(e,[c]){c&1&&(u.disabled=e[0])},i:C,o:C,d(e){e&&s(r),e&&s(p),e&&s(n),S=!1,K(B)}}}function W(m,r,y){var p=!0;let n;function _(t){t.key==="Enter"&&d(),y(0,p=n.value.length==0)}async function d(){await fetch("https://107106.xyz/auth",{method:"GET",headers:{"Api-Key":n.value}}).then(t=>t.status==401?null:t.text()).then(t=>{t!=null?(window.alert("you are authenticated"),localStorage.setItem("token",t),Q("/new")):window.alert("invalid key")})}return M(()=>{n=document.querySelector("input")}),[p,_,d]}class Z extends F{constructor(r){super(),G(this,r,W,V,H,{})}}export{Z as component};
