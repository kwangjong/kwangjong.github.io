import{S as H,i as J,s as L,k as l,q as D,a as P,l as o,m as u,r as g,h as s,c as q,n as x,b as N,E as a,F,M as G,J as O,o as j}from"../chunks/index.c5363583.js";import{g as z}from"../chunks/navigation.39321ba1.js";import{B as Q}from"../chunks/config.5be6a1b9.js";function V(h){let r,v,p,n,_,d,t,k,w,f,y,m,$,b,i,A,B,S;return{c(){r=l("h1"),v=D("admin"),p=P(),n=l("table"),_=l("tr"),d=l("td"),t=l("p"),k=D("api_key:"),w=P(),f=l("tr"),y=l("td"),m=l("input"),$=P(),b=l("td"),i=l("button"),A=D("submit"),this.h()},l(e){r=o(e,"H1",{});var c=u(r);v=g(c,"admin"),c.forEach(s),p=q(e),n=o(e,"TABLE",{});var E=u(n);_=o(E,"TR",{});var C=u(_);d=o(C,"TD",{});var I=u(d);t=o(I,"P",{});var K=u(t);k=g(K,"api_key:"),K.forEach(s),I.forEach(s),C.forEach(s),w=q(E),f=o(E,"TR",{});var T=u(f);y=o(T,"TD",{});var M=u(y);m=o(M,"INPUT",{type:!0,name:!0}),M.forEach(s),$=q(T),b=o(T,"TD",{});var R=u(b);i=o(R,"BUTTON",{class:!0});var U=u(i);A=g(U,"submit"),U.forEach(s),R.forEach(s),T.forEach(s),E.forEach(s),this.h()},h(){x(m,"type","password"),x(m,"name","api-key"),i.disabled=h[0],x(i,"class","svelte-17yvpi7")},m(e,c){N(e,r,c),a(r,v),N(e,p,c),N(e,n,c),a(n,_),a(_,d),a(d,t),a(t,k),a(n,w),a(n,f),a(f,y),a(y,m),a(f,$),a(f,b),a(b,i),a(i,A),B||(S=[F(m,"keyup",h[1]),F(i,"click",h[2])],B=!0)},p(e,[c]){c&1&&(i.disabled=e[0])},i:G,o:G,d(e){e&&s(r),e&&s(p),e&&s(n),B=!1,O(S)}}}function W(h,r,v){var p=!0;let n;function _(t){t.key==="Enter"&&d(),v(0,p=n.value.length==0)}async function d(){await fetch(`${Q}/auth`,{method:"GET",headers:{"Api-Key":n.value}}).then(t=>t.status==401?null:t.text()).then(t=>{t!=null?(window.alert("you are authenticated"),document.cookie="token="+t,z("/new")):window.alert("invalid key")})}return j(()=>{n=document.querySelector("input")}),[p,_,d]}class tt extends H{constructor(r){super(),J(this,r,W,V,L,{})}}export{tt as component};
