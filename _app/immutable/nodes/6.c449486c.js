import{a as ue,S as pe,r as me,g as fe}from"../chunks/SyntaxHighlight.d3cf2476.js";import{S as ve,i as _e,s as he,k as l,a as b,y as ge,q as U,R as we,l as o,m as d,h as s,c as S,z as ke,r as C,n as u,N as ee,E as a,b as q,A as ye,F as H,L as be,g as Se,d as Te,B as Ee,O as xe,o as $e,T as je}from"../chunks/index.158cc983.js";import{g as oe}from"../chunks/navigation.b4aff219.js";async function Oe(){return await ue()}const qe=Object.freeze(Object.defineProperty({__proto__:null,load:Oe},Symbol.toStringTag,{value:"Module"}));const{document:P}=je;function Ie(T){let n,g,V,e,E,_,B,x,h,i,c,p,f,r,v,w,$,M,j,K,X,k,L,Y,O,G,y,I,J,Q,D,W,R,Z,te;return h=new pe({}),{c(){n=l("link"),g=l("script"),e=l("script"),_=l("script"),x=b(),ge(h.$$.fragment),i=b(),c=l("h1"),p=U("editor"),f=b(),r=l("div"),v=l("div"),w=l("button"),$=U("edit"),M=b(),j=l("button"),K=U("preview"),X=b(),k=l("div"),L=l("div"),Y=b(),O=l("textarea"),G=b(),y=l("div"),I=l("button"),J=U("cancel"),Q=b(),D=l("button"),W=U("save"),this.h()},l(t){const m=we("svelte-wyp7os",P.head);n=o(m,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0}),g=o(m,"SCRIPT",{src:!0});var ie=d(g);ie.forEach(s),e=o(m,"SCRIPT",{src:!0});var ce=d(e);ce.forEach(s),_=o(m,"SCRIPT",{src:!0});var de=d(_);de.forEach(s),m.forEach(s),x=S(t),ke(h.$$.fragment,t),i=S(t),c=o(t,"H1",{class:!0});var se=d(c);p=C(se,"editor"),se.forEach(s),f=S(t),r=o(t,"DIV",{class:!0});var N=d(r);v=o(N,"DIV",{class:!0});var z=d(v);w=o(z,"BUTTON",{});var ae=d(w);$=C(ae,"edit"),ae.forEach(s),M=S(z),j=o(z,"BUTTON",{});var re=d(j);K=C(re,"preview"),re.forEach(s),z.forEach(s),X=S(N),k=o(N,"DIV",{class:!0});var A=d(k);L=o(A,"DIV",{class:!0}),d(L).forEach(s),Y=S(A),O=o(A,"TEXTAREA",{class:!0}),d(O).forEach(s),A.forEach(s),G=S(N),y=o(N,"DIV",{class:!0});var F=d(y);I=o(F,"BUTTON",{});var ne=d(I);J=C(ne,"cancel"),ne.forEach(s),Q=S(F),D=o(F,"BUTTON",{});var le=d(D);W=C(le,"save"),le.forEach(s),F.forEach(s),N.forEach(s),this.h()},h(){u(n,"rel","stylesheet"),u(n,"href","https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css"),u(n,"integrity","sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X"),u(n,"crossorigin","anonymous"),ee(g.src,V="//cdn.jsdelivr.net/npm/marked/marked.min.js")||u(g,"src",V),ee(e.src,E="//cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js")||u(e,"src",E),ee(_.src,B="https://cdn.jsdelivr.net/npm/marked-katex-extension/lib/index.umd.js")||u(_,"src",B),u(c,"class","svelte-wwn397"),u(v,"class","markdown-header"),u(L,"class","preview"),O.value=T[0],u(O,"class","svelte-wwn397"),u(k,"class","markdown-body svelte-wwn397"),u(y,"class","markdown-footer"),u(r,"class","markdown-editor svelte-wwn397")},m(t,m){a(P.head,n),a(P.head,g),a(P.head,e),a(P.head,_),q(t,x,m),ye(h,t,m),q(t,i,m),q(t,c,m),a(c,p),q(t,f,m),q(t,r,m),a(r,v),a(v,w),a(w,$),a(v,M),a(v,j),a(j,K),a(r,X),a(r,k),a(k,L),a(k,Y),a(k,O),a(r,G),a(r,y),a(y,I),a(I,J),a(y,Q),a(y,D),a(D,W),R=!0,Z||(te=[H(e,"load",De),H(e,"error",Ne),H(w,"click",T[2]),H(j,"click",T[1]),H(I,"click",T[3]),H(D,"click",T[4])],Z=!0)},p:be,i(t){R||(Se(h.$$.fragment,t),R=!0)},o(t){Te(h.$$.fragment,t),R=!1},d(t){s(n),s(g),s(e),s(_),t&&s(x),Ee(h,t),t&&s(i),t&&s(c),t&&s(f),t&&s(r),Z=!1,xe(te)}}}function De(){console.log("loaded")}function Ne(){console.log("not loaded")}function He(T){let n=new Date(Date.now()),V=`---
title: 
tags: [ ]
date: ${`${n.toISOString().split("T")[0]} ${n.toString().split(" ")[4]} -${n.toString().split("-")[1].slice(0,2)}:${n.toString().split("-")[1].slice(2,5)}`}
---
`,e,E;function _(){const i=/^---[\s\S]*?---\s*/m,c=e.value.replace(i,""),p={throwOnError:!1},f={mangle:!1,headerIds:!1};marked.use(markedKatex(p),f);let r=marked.parse(c);console.log(r),e.style.display="none",E.innerHTML=r,me()}function B(){e.style.display="block",E.innerHTML=""}function x(){oe("/blog")}function h(){try{let i=e.value,c=i.split("---")[1],p=jsyaml.load(c),f={Title:p.title,Date:p.date,MarkDown:i,Tags:p.tags,Html:"",Url:""};const r=/^---[\s\S]*?---\s*/m,v=e.value.replace(r,""),w={throwOnError:!1};marked.use(markedKatex(w)),f.Html=marked.parse(v),f.Url=`${p.date.toISOString().split("T")[0]}-${p.title.replaceAll(" ","-")}`;let $=fe();const M=fetch("https://107106.xyz/blog/",{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json",Token:$??""}}).then(()=>{oe("/blog")})}catch(i){window.alert(i.message)}}return $e(()=>{e=document.querySelector("textarea"),E=document.querySelector(".preview"),e.addEventListener("keydown",i=>{if(i.key==="Tab"){const c=e.selectionStart,p=e.selectionEnd;e.value=e.value.substring(0,c)+"	"+e.value.substring(p),e.selectionStart=e.selectionEnd=c+1,i.preventDefault()}})}),[V,_,B,x,h]}class Pe extends ve{constructor(n){super(),_e(this,n,He,Ie,he,{})}}export{Pe as component,qe as universal};
