import{S as F,i as G,s as H,k as l,q as $,a as q,l as o,m as i,r as D,h as s,c as P,n as j,b as A,E as n,F as z,L as C,O as K,o as M}from"../chunks/index.158cc983.js";import{j as J}from"../chunks/singletons.9cfd3d82.js";const Q=J("goto");function V(m){let r,v,p,e,_,u,t,k,w,h,y,f,g,b,d,x,S,B;return{c(){r=l("h1"),v=$("admin"),p=q(),e=l("table"),_=l("tr"),u=l("td"),t=l("p"),k=$("api_key:"),w=q(),h=l("tr"),y=l("td"),f=l("input"),g=q(),b=l("td"),d=l("button"),x=$("submit"),this.h()},l(a){r=o(a,"H1",{});var c=i(r);v=D(c,"admin"),c.forEach(s),p=P(a),e=o(a,"TABLE",{});var E=i(e);_=o(E,"TR",{});var I=i(_);u=o(I,"TD",{});var L=i(u);t=o(L,"P",{class:!0});var N=i(t);k=D(N,"api_key:"),N.forEach(s),L.forEach(s),I.forEach(s),w=P(E),h=o(E,"TR",{});var T=i(h);y=o(T,"TD",{});var O=i(y);f=o(O,"INPUT",{type:!0,name:!0}),O.forEach(s),g=P(T),b=o(T,"TD",{});var R=i(b);d=o(R,"BUTTON",{});var U=i(d);x=D(U,"submit"),U.forEach(s),R.forEach(s),T.forEach(s),E.forEach(s),this.h()},h(){j(t,"class","svelte-1xyjwo"),j(f,"type","password"),j(f,"name","api-key"),d.disabled=m[0]},m(a,c){A(a,r,c),n(r,v),A(a,p,c),A(a,e,c),n(e,_),n(_,u),n(u,t),n(t,k),n(e,w),n(e,h),n(h,y),n(y,f),n(h,g),n(h,b),n(b,d),n(d,x),S||(B=[z(f,"keyup",m[1]),z(d,"click",m[2])],S=!0)},p(a,[c]){c&1&&(d.disabled=a[0])},i:C,o:C,d(a){a&&s(r),a&&s(p),a&&s(e),S=!1,K(B)}}}function W(m,r,v){var p=!0;let e;function _(t){t.key==="Enter"&&u(),v(0,p=e.value.length==0)}async function u(){console.log(e.value),await fetch("https://107106.xyz/auth",{method:"GET",headers:{"Api-Key":e.value}}).then(t=>t.status==401?null:t.text()).then(t=>{t!=null?(window.alert("you are authenticated"),localStorage.setItem("token",t),Q("/new")):window.alert("invalid key")})}return M(()=>{e=document.querySelector("input")}),[p,_,u]}class Z extends F{constructor(r){super(),G(this,r,W,V,H,{})}}export{Z as component};
