import{g as O,i as H}from"../chunks/auth.a5305361.js";import{S as P,i as j,s as B,y as L,a as p,k as g,P as $,z as U,c as b,l as y,m as v,Q as k,h as _,n as z,A as q,b as T,E as f,g as I,d as M,B as N,o as V,q as w,r as E,F as S,L as C,O as F}from"../chunks/index.158cc983.js";import{g as A}from"../chunks/navigation.17dcf805.js";import{S as G,r as Q}from"../chunks/SyntaxHighlight.426c2788.js";async function x({fetch:d,params:e}){let s=O(),t=await d(`https://107106.xyz/blog/${e.slug}`,{method:"GET",headers:{Token:s??""}}).then(h=>h.json()),o=new Date(t.Date);var n={year:"numeric",month:"long",day:"numeric"};let i=o.toLocaleDateString("en-US",n);return{header:`
        <h1 class="title">${t.Title}</h1>
        <time class="date" datetime="${o}" itemprop="datePublished">${i}</time>`,body:t.Html,isAuthed:await H(),slug:e.slug}}const Z=Object.freeze(Object.defineProperty({__proto__:null,load:x},Symbol.toStringTag,{value:"Module"}));function D(d){let e,s,t,o,n,i,m,h;return{c(){e=g("div"),s=g("button"),t=w("edit"),o=p(),n=g("button"),i=w("delete"),this.h()},l(c){e=y(c,"DIV",{class:!0});var u=v(e);s=y(u,"BUTTON",{});var l=v(s);t=E(l,"edit"),l.forEach(_),o=b(u),n=y(u,"BUTTON",{});var a=v(n);i=E(a,"delete"),a.forEach(_),u.forEach(_),this.h()},h(){z(e,"class","admin-option")},m(c,u){T(c,e,u),f(e,s),f(s,t),f(e,o),f(e,n),f(n,i),m||(h=[S(s,"click",d[1]),S(n,"click",d[2])],m=!0)},p:C,d(c){c&&_(e),m=!1,F(h)}}}function J(d){let e,s,t,o,n=d[0].header+"",i,m,h,c=d[0].body+"",u;e=new G({});let l=d[0].isAuthed&&D(d);return{c(){L(e.$$.fragment),s=p(),t=g("div"),o=new $(!1),i=p(),l&&l.c(),m=p(),h=new $(!1),this.h()},l(a){U(e.$$.fragment,a),s=b(a),t=y(a,"DIV",{class:!0});var r=v(t);o=k(r,!1),i=b(r),l&&l.l(r),m=b(r),h=k(r,!1),r.forEach(_),this.h()},h(){o.a=i,h.a=null,z(t,"class","post")},m(a,r){q(e,a,r),T(a,s,r),T(a,t,r),o.m(n,t),f(t,i),l&&l.m(t,null),f(t,m),h.m(c,t),u=!0},p(a,[r]){(!u||r&1)&&n!==(n=a[0].header+"")&&o.p(n),a[0].isAuthed?l?l.p(a,r):(l=D(a),l.c(),l.m(t,m)):l&&(l.d(1),l=null),(!u||r&1)&&c!==(c=a[0].body+"")&&h.p(c)},i(a){u||(I(e.$$.fragment,a),u=!0)},o(a){M(e.$$.fragment,a),u=!1},d(a){N(e,a),a&&_(s),a&&_(t),l&&l.d()}}}function K(d,e,s){let{data:t}=e;V(async()=>{Q()});function o(){A("/new/?edit="+t.slug)}function n(){if(confirm("Are you sure you want to delete this post?")){let m=O();fetch("https://107106.xyz/blog/"+t.slug,{method:"DELETE",headers:{Token:m??""}}).then(()=>{A("/blog")})}}return d.$$set=i=>{"data"in i&&s(0,t=i.data)},[t,o,n]}class tt extends P{constructor(e){super(),j(this,e,K,J,B,{data:0})}}export{tt as component,Z as universal};
