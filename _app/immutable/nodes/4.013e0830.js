import{S,i as L,s as B,k as _,q as $,a as x,Q as U,e as y,l as b,m as P,r as k,h as g,c as T,R as q,n as p,b as v,E as d,L as w,M as A}from"../chunks/index.32631a68.js";import{p as H}from"../chunks/stores.203ed5bc.js";import{g as I}from"../chunks/auth.050595b4.js";function R(h){let s,r,m,f,l,a,n,o,i;return{c(){s=_("div"),r=_("a"),m=$("Blog"),f=x(),l=_("a"),a=$("Tags"),n=x(),o=new U(!1),i=y(),this.h()},l(t){s=b(t,"DIV",{class:!0});var e=P(s);r=b(e,"A",{class:!0,href:!0});var c=P(r);m=k(c,"Blog"),c.forEach(g),f=T(e),l=b(e,"A",{class:!0,href:!0,"sveltekit:prefetch":!0});var u=P(l);a=k(u,"Tags"),u.forEach(g),e.forEach(g),n=T(t),o=q(t,!1),i=y(),this.h()},h(){p(r,"class","blog"),p(r,"href","/blog"),p(l,"class","tags"),p(l,"href","/tags"),p(l,"sveltekit:prefetch",""),p(s,"class","blog-menu"),o.a=i},m(t,e){v(t,s,e),d(s,r),d(r,m),d(s,f),d(s,l),d(l,a),v(t,n,e),o.m(h[0],t,e),v(t,i,e)},p(t,[e]){e&1&&o.p(t[0])},i:w,o:w,d(t){t&&g(s),t&&g(n),t&&g(i),t&&o.d()}}}function j(h,s,r){let m;A(h,H,a=>r(1,m=a));async function f(a,n){let i=I(),t=await fetch(`https://107106.xyz/blog/list?tag=${n}&skip=${(a-1)*7}&numPost=7`,{method:"GET",headers:{Token:i??""}}).then(c=>c.json()),e='<ul class="blog-list">';return t.entries.forEach(c=>{let u=new Date(c.Date);var E={year:"numeric",month:"long",day:"numeric"};let D=u.toLocaleDateString("en-US",E);e+=`
            <li class="blog-entry">
                <h2 class="title"><a href="${"/blog/"+c.Url}" sveltekit:prefetch>${c.Title}</a></h2>
                <time class="date" datetime="${u}" itemprop="datePublished">${D}</time>
            </li>
            `}),e+='</ul> <section id="post-navigator">',e+=a>1?`<a href="/blog?page=${a-1}"> &lt Newer </a>`:"",e+=t.hasNext?`<a href="/blog?page=${a+1}"> Older &gt </a>`:"",e+="</section>",e}let l="";return h.$$.update=()=>{h.$$.dirty&2&&(async()=>{const a=new URL(m.url),n=parseInt(a.searchParams.get("page")??"1"),o=a.searchParams.get("tag")??"";r(0,l=await f(n,o))})()},[l,m]}class M extends S{constructor(s){super(),L(this,s,j,R,B,{})}}export{M as component};
