import{a as ue,S as pe,r as me,g as ve}from"../chunks/SyntaxHighlight.914a23fb.js";import{S as fe,i as _e,s as he,k as l,a as b,y as ge,q as U,R as ke,l as o,m as d,h as t,c as S,z as we,r as C,n as u,N as ee,E as s,b as L,A as ye,F,L as be,g as Se,d as Te,B as Ee,O as xe,o as $e,T as je}from"../chunks/index.158cc983.js";import{g as oe}from"../chunks/navigation.afb57683.js";async function Oe(){return await ue()}const Ce=Object.freeze(Object.defineProperty({__proto__:null,load:Oe},Symbol.toStringTag,{value:"Module"}));const{document:q}=je;function Ie(T){let n,g,P,a,E,_,V,x,h,i,c,p,v,r,f,k,$,B,j,K,X,w,H,Y,O,G,y,I,J,Q,D,W,M,Z,te;return h=new pe({}),{c(){n=l("link"),g=l("script"),a=l("script"),_=l("script"),x=b(),ge(h.$$.fragment),i=b(),c=l("h1"),p=U("editor"),v=b(),r=l("div"),f=l("div"),k=l("button"),$=U("edit"),B=b(),j=l("button"),K=U("preview"),X=b(),w=l("div"),H=l("div"),Y=b(),O=l("textarea"),G=b(),y=l("div"),I=l("button"),J=U("cancel"),Q=b(),D=l("button"),W=U("save"),this.h()},l(e){const m=ke("svelte-10tpdyr",q.head);n=o(m,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0}),g=o(m,"SCRIPT",{src:!0});var ie=d(g);ie.forEach(t),a=o(m,"SCRIPT",{src:!0});var ce=d(a);ce.forEach(t),_=o(m,"SCRIPT",{src:!0});var de=d(_);de.forEach(t),m.forEach(t),x=S(e),we(h.$$.fragment,e),i=S(e),c=o(e,"H1",{class:!0});var se=d(c);p=C(se,"editor"),se.forEach(t),v=S(e),r=o(e,"DIV",{class:!0});var N=d(r);f=o(N,"DIV",{class:!0});var R=d(f);k=o(R,"BUTTON",{});var ae=d(k);$=C(ae,"edit"),ae.forEach(t),B=S(R),j=o(R,"BUTTON",{});var re=d(j);K=C(re,"preview"),re.forEach(t),R.forEach(t),X=S(N),w=o(N,"DIV",{class:!0});var z=d(w);H=o(z,"DIV",{class:!0}),d(H).forEach(t),Y=S(z),O=o(z,"TEXTAREA",{class:!0}),d(O).forEach(t),z.forEach(t),G=S(N),y=o(N,"DIV",{class:!0});var A=d(y);I=o(A,"BUTTON",{});var ne=d(I);J=C(ne,"cancel"),ne.forEach(t),Q=S(A),D=o(A,"BUTTON",{});var le=d(D);W=C(le,"save"),le.forEach(t),A.forEach(t),N.forEach(t),this.h()},h(){u(n,"rel","stylesheet"),u(n,"href","https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css"),u(n,"integrity","sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X"),u(n,"crossorigin","anonymous"),ee(g.src,P="//cdn.jsdelivr.net/npm/marked/marked.min.js")||u(g,"src",P),ee(a.src,E="//cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js")||u(a,"src",E),ee(_.src,V="https://cdn.jsdelivr.net/npm/marked-katex-extension/lib/index.umd.js")||u(_,"src",V),u(c,"class","svelte-wwn397"),u(f,"class","markdown-header"),u(H,"class","preview"),O.value=T[0],u(O,"class","svelte-wwn397"),u(w,"class","markdown-body svelte-wwn397"),u(y,"class","markdown-footer"),u(r,"class","markdown-editor svelte-wwn397")},m(e,m){s(q.head,n),s(q.head,g),s(q.head,a),s(q.head,_),L(e,x,m),ye(h,e,m),L(e,i,m),L(e,c,m),s(c,p),L(e,v,m),L(e,r,m),s(r,f),s(f,k),s(k,$),s(f,B),s(f,j),s(j,K),s(r,X),s(r,w),s(w,H),s(w,Y),s(w,O),s(r,G),s(r,y),s(y,I),s(I,J),s(y,Q),s(y,D),s(D,W),M=!0,Z||(te=[F(k,"click",T[2]),F(j,"click",T[1]),F(I,"click",T[3]),F(D,"click",T[4])],Z=!0)},p:be,i(e){M||(Se(h.$$.fragment,e),M=!0)},o(e){Te(h.$$.fragment,e),M=!1},d(e){t(n),t(g),t(a),t(_),e&&t(x),Ee(h,e),e&&t(i),e&&t(c),e&&t(v),e&&t(r),Z=!1,xe(te)}}}function De(T){let n=new Date(Date.now()),P=`---
title: 
tags: [ ]
date: ${`${n.toISOString().split("T")[0]} ${n.toString().split(" ")[4]} -${n.toString().split("-")[1].slice(0,2)}:${n.toString().split("-")[1].slice(2,5)}`}
---
`,a,E;function _(){const i=/^---[\s\S]*?---\s*/m,c=a.value.replace(i,""),p={throwOnError:!1},v={mangle:!1,headerIds:!1};marked.use(markedKatex(p),v);let r=marked.parse(c);console.log(r),a.style.display="none",E.innerHTML=r,me()}function V(){a.style.display="block",E.innerHTML=""}function x(){oe("/blog")}function h(){try{let i=a.value,c=i.split("---")[1],p=jsyaml.load(c),v={Title:p.title,Date:p.date,MarkDown:i,Tags:p.tags,Html:"",Url:""};const r=/^---[\s\S]*?---\s*/m,f=a.value.replace(r,""),k={throwOnError:!1};marked.use(markedKatex(k)),v.Html=marked.parse(f),v.Url=`${p.date.toISOString().split("T")[0]}-${p.title.replaceAll(" ","-")}`;let $=ve();const B=fetch("https://107106.xyz/blog/",{method:"POST",body:JSON.stringify(v),headers:{"Content-Type":"application/json",Token:$??""}}).then(()=>{oe("/blog")})}catch(i){window.alert(i.message)}}return $e(()=>{a=document.querySelector("textarea"),E=document.querySelector(".preview"),a.addEventListener("keydown",i=>{if(i.key==="Tab"){const c=a.selectionStart,p=a.selectionEnd;a.value=a.value.substring(0,c)+"	"+a.value.substring(p),a.selectionStart=a.selectionEnd=c+1,i.preventDefault()}})}),[P,_,V,x,h]}class Le extends fe{constructor(n){super(),_e(this,n,De,Ie,he,{})}}export{Le as component,Ce as universal};
