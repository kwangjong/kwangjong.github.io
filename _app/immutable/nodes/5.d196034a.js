import{S as de,i as ue,s as pe,k as o,a as y,y as me,q as C,Q as ve,l as i,m as d,h as t,c as g,z as fe,r as L,n as c,N as Z,E as s,b as q,A as he,F as ee,L as _e,g as we,d as ke,B as ye,R as ge,o as be,T as Ee}from"../chunks/index.d92f3f85.js";import{S as Se,r as Te}from"../chunks/SyntaxHighlight.38c9db66.js";new TextEncoder;const{document:H}=Ee;function xe(E){let l,_,U,r,S,v,V,T,n,m,a,b,f,u,h,x,F,K,$,M,z,w,D,Q,j,X,k,I,Y,J,O,W,B,G,te;return n=new Se({}),{c(){l=o("link"),_=o("script"),r=o("script"),v=o("script"),T=y(),me(n.$$.fragment),m=y(),a=o("h1"),b=C("editor"),f=y(),u=o("div"),h=o("div"),x=o("button"),F=C("edit"),K=y(),$=o("button"),M=C("preview"),z=y(),w=o("div"),D=o("div"),Q=y(),j=o("textarea"),X=y(),k=o("div"),I=o("button"),Y=C("cancel"),J=y(),O=o("button"),W=C("save"),this.h()},l(e){const p=ve("svelte-10tpdyr",H.head);l=i(p,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0}),_=i(p,"SCRIPT",{src:!0});var oe=d(_);oe.forEach(t),r=i(p,"SCRIPT",{src:!0});var ie=d(r);ie.forEach(t),v=i(p,"SCRIPT",{src:!0});var ce=d(v);ce.forEach(t),p.forEach(t),T=g(e),fe(n.$$.fragment,e),m=g(e),a=i(e,"H1",{class:!0});var se=d(a);b=L(se,"editor"),se.forEach(t),f=g(e),u=i(e,"DIV",{class:!0});var N=d(u);h=i(N,"DIV",{class:!0});var P=d(h);x=i(P,"BUTTON",{});var re=d(x);F=L(re,"edit"),re.forEach(t),K=g(P),$=i(P,"BUTTON",{});var ae=d($);M=L(ae,"preview"),ae.forEach(t),P.forEach(t),z=g(N),w=i(N,"DIV",{class:!0});var R=d(w);D=i(R,"DIV",{class:!0}),d(D).forEach(t),Q=g(R),j=i(R,"TEXTAREA",{class:!0}),d(j).forEach(t),R.forEach(t),X=g(N),k=i(N,"DIV",{class:!0});var A=d(k);I=i(A,"BUTTON",{onclick:!0});var ne=d(I);Y=L(ne,"cancel"),ne.forEach(t),J=g(A),O=i(A,"BUTTON",{});var le=d(O);W=L(le,"save"),le.forEach(t),A.forEach(t),N.forEach(t),this.h()},h(){c(l,"rel","stylesheet"),c(l,"href","https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css"),c(l,"integrity","sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X"),c(l,"crossorigin","anonymous"),Z(_.src,U="//cdn.jsdelivr.net/npm/marked/marked.min.js")||c(_,"src",U),Z(r.src,S="//cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js")||c(r,"src",S),Z(v.src,V="https://cdn.jsdelivr.net/npm/marked-katex-extension/lib/index.umd.js")||c(v,"src",V),c(a,"class","svelte-wwn397"),c(h,"class","markdown-header"),c(D,"class","preview"),j.value=E[0],c(j,"class","svelte-wwn397"),c(w,"class","markdown-body svelte-wwn397"),c(I,"onclick","location.href='/blog'"),c(k,"class","markdown-footer"),c(u,"class","markdown-editor svelte-wwn397")},m(e,p){s(H.head,l),s(H.head,_),s(H.head,r),s(H.head,v),q(e,T,p),he(n,e,p),q(e,m,p),q(e,a,p),s(a,b),q(e,f,p),q(e,u,p),s(u,h),s(h,x),s(x,F),s(h,K),s(h,$),s($,M),s(u,z),s(u,w),s(w,D),s(w,Q),s(w,j),s(u,X),s(u,k),s(k,I),s(I,Y),s(k,J),s(k,O),s(O,W),B=!0,G||(te=[ee(x,"click",E[2]),ee($,"click",E[1]),ee(O,"click",E[3])],G=!0)},p:_e,i(e){B||(we(n.$$.fragment,e),B=!0)},o(e){ke(n.$$.fragment,e),B=!1},d(e){t(l),t(_),t(r),t(v),e&&t(T),ye(n,e),e&&t(m),e&&t(a),e&&t(f),e&&t(u),G=!1,ge(te)}}}function $e(E){let l=new Date(Date.now()),U=`---
title: 
tags: [ ]
date: ${`${l.toISOString().split("T")[0]} ${l.toString().split(" ")[4]} -${l.toString().split("-")[1].slice(0,2)}:${l.toString().split("-")[1].slice(2,5)}`}
---
`,r,S;function v(){const n=/^---[\s\S]*?---\s*/m,m=r.value.replace(n,""),a={throwOnError:!1},b={mangle:!1,headerIds:!1};marked.use(markedKatex(a),b);let f=marked.parse(m);console.log(f),r.style.display="none",S.innerHTML=f,Te()}function V(){r.style.display="block",S.innerHTML=""}function T(){try{let n=r.value,m=n.split("---")[1],a=jsyaml.load(m);a.markdown=n;const b=/^---[\s\S]*?---\s*/m,f=r.value.replace(b,""),u={throwOnError:!1};marked.use(markedKatex(u)),a.html=marked.parse(f),a.url=`${a.date.toISOString().split("T")[0]}-${a.title.replaceAll(" ","-")}`;const h=fetch("http://104.154.96.6:8080/blog/",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}})}catch(n){window.alert(n.message)}}return be(()=>{r=document.querySelector("textarea"),S=document.querySelector(".preview"),r.addEventListener("keydown",n=>{if(n.key==="Tab"){const m=r.selectionStart,a=r.selectionEnd;r.value=r.value.substring(0,m)+"	"+r.value.substring(a),r.selectionStart=r.selectionEnd=m+1,n.preventDefault()}})}),[U,v,V,T]}class Oe extends de{constructor(l){super(),ue(this,l,$e,xe,pe,{})}}export{Oe as component};
