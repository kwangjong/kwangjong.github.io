import{S as P,i as z,s as B,y as O,a as y,k as _,Q as U,z as V,c as b,l as g,m as v,R as j,h as u,n as k,A as q,b as p,E as h,g as F,d as M,B as N,q as S,r as w,F as D,L as C,P as G}from"../chunks/index.32631a68.js";import{g as $}from"../chunks/navigation.29679010.js";import{S as Q,r as R}from"../chunks/SyntaxHighlight.94379ef5.js";import{g as H,i as x}from"../chunks/auth.5886d4eb.js";function L(r){let s,n,i,d,l,m,o,f;return{c(){s=_("div"),n=_("button"),i=S("edit"),d=y(),l=_("button"),m=S("delete"),this.h()},l(e){s=g(e,"DIV",{class:!0});var t=v(s);n=g(t,"BUTTON",{});var a=v(n);i=w(a,"edit"),a.forEach(u),d=b(t),l=g(t,"BUTTON",{});var c=v(l);m=w(c,"delete"),c.forEach(u),t.forEach(u),this.h()},h(){k(s,"class","admin-option")},m(e,t){p(e,s,t),h(s,n),h(n,i),h(s,d),h(s,l),h(l,m),o||(f=[D(n,"click",r[3]),D(l,"click",r[4])],o=!0)},p:C,d(e){e&&u(s),o=!1,G(f)}}}function J(r){let s,n,i,d,l,m,o,f;s=new Q({});let e=r[2]&&L(r);return{c(){O(s.$$.fragment),n=y(),i=_("div"),d=new U(!1),l=y(),e&&e.c(),m=y(),o=_("div"),this.h()},l(t){V(s.$$.fragment,t),n=b(t),i=g(t,"DIV",{class:!0});var a=v(i);d=j(a,!1),l=b(a),e&&e.l(a),a.forEach(u),m=b(t),o=g(t,"DIV",{class:!0});var c=v(o);c.forEach(u),this.h()},h(){d.a=l,k(i,"class","post-header"),k(o,"class","post")},m(t,a){q(s,t,a),p(t,n,a),p(t,i,a),d.m(r[0],i),h(i,l),e&&e.m(i,null),p(t,m,a),p(t,o,a),o.innerHTML=r[1],f=!0},p(t,[a]){(!f||a&1)&&d.p(t[0]),t[2]?e?e.p(t,a):(e=L(t),e.c(),e.m(i,null)):e&&(e.d(1),e=null),(!f||a&2)&&(o.innerHTML=t[1])},i(t){f||(F(s.$$.fragment,t),f=!0)},o(t){M(s.$$.fragment,t),f=!1},d(t){N(s,t),t&&u(n),t&&u(i),e&&e.d(),t&&u(m),t&&u(o)}}}function K(r,s,n){let{data:i}=s,d="",l="",m=!1;async function o(t){let a=H(),c=await fetch(`https://107106.xyz/blog/${t}`,{method:"GET",headers:{Token:a??""}}).then(T=>T.json()),E=new Date(c.Date);var A={year:"numeric",month:"long",day:"numeric"};let I=E.toLocaleDateString("en-US",A);n(0,d=`
        <h1 class="title">${c.Title}</h1>
        <time class="date" datetime="${E.toISOString()}" itemprop="datePublished">${I}</time>
        <div class="tags">
          ${c.Tags.map(T=>`<span class="tag">#${T}</span>`).join("")}
        </div>`),n(1,l=c.Html),n(2,m=await x())}function f(){$("/new/?edit="+i.slug)}function e(){if(confirm("Are you sure you want to delete this post?")){let a=H();fetch("https://107106.xyz/blog/"+i.slug,{method:"DELETE",headers:{Token:a??""}}).then(()=>{$("/blog")})}}return r.$$set=t=>{"data"in t&&n(5,i=t.data)},r.$$.update=()=>{r.$$.dirty&32&&(async()=>(await o(i.slug),R()))()},[d,l,m,f,e,i]}class tt extends P{constructor(s){super(),z(this,s,K,J,B,{data:5})}}export{tt as component};
