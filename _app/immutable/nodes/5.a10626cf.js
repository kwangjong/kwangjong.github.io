import{S as P,i as j,s as L,y as M,a as v,k as _,R as N,z as U,c as y,l as g,m as b,T as V,h as d,n as E,A as q,b as p,E as h,g as z,d as C,B as F,q as k,r as $,F as D,M as G,J}from"../chunks/index.c5363583.js";/* empty css                            */import{B as w}from"../chunks/config.5be6a1b9.js";import{g as A}from"../chunks/navigation.a263df15.js";import{S as K,r as R}from"../chunks/SyntaxHighlight.7958c440.js";import{g as H,i as Q}from"../chunks/auth.3fa1d903.js";async function W({params:i}){return{slug:i.slug}}const nt=Object.freeze(Object.defineProperty({__proto__:null,load:W},Symbol.toStringTag,{value:"Module"}));function B(i){let s,l,n,u,o,m,r,c;return{c(){s=_("div"),l=_("button"),n=k("edit"),u=v(),o=_("button"),m=k("delete"),this.h()},l(e){s=g(e,"DIV",{class:!0});var t=b(s);l=g(t,"BUTTON",{});var a=b(l);n=$(a,"edit"),a.forEach(d),u=y(t),o=g(t,"BUTTON",{});var f=b(o);m=$(f,"delete"),f.forEach(d),t.forEach(d),this.h()},h(){E(s,"class","admin-option")},m(e,t){p(e,s,t),h(s,l),h(l,n),h(s,u),h(s,o),h(o,m),r||(c=[D(l,"click",i[3]),D(o,"click",i[4])],r=!0)},p:G,d(e){e&&d(s),r=!1,J(c)}}}function X(i){let s,l,n,u,o,m,r,c;s=new K({});let e=i[2]&&B(i);return{c(){M(s.$$.fragment),l=v(),n=_("div"),u=new N(!1),o=v(),e&&e.c(),m=v(),r=_("div"),this.h()},l(t){U(s.$$.fragment,t),l=y(t),n=g(t,"DIV",{class:!0});var a=b(n);u=V(a,!1),o=y(a),e&&e.l(a),a.forEach(d),m=y(t),r=g(t,"DIV",{class:!0});var f=b(r);f.forEach(d),this.h()},h(){u.a=o,E(n,"class","post-header"),E(r,"class","post")},m(t,a){q(s,t,a),p(t,l,a),p(t,n,a),u.m(i[0],n),h(n,o),e&&e.m(n,null),p(t,m,a),p(t,r,a),r.innerHTML=i[1],c=!0},p(t,[a]){(!c||a&1)&&u.p(t[0]),t[2]?e?e.p(t,a):(e=B(t),e.c(),e.m(n,null)):e&&(e.d(1),e=null),(!c||a&2)&&(r.innerHTML=t[1])},i(t){c||(z(s.$$.fragment,t),c=!0)},o(t){C(s.$$.fragment,t),c=!1},d(t){F(s,t),t&&d(l),t&&d(n),e&&e.d(),t&&d(m),t&&d(r)}}}function Y(i,s,l){let{data:n}=s,u="",o="",m=!1;async function r(t){let a=H(),f=await fetch(`${w}/blog/${t}`,{method:"GET",headers:{Token:a??""}}).then(T=>T.json()),S=new Date(f.Date);var I={year:"numeric",month:"long",day:"numeric"};let O=S.toLocaleDateString("en-US",I);l(0,u=`
        <h1 class="title">${f.Title}</h1>
        <time class="date" datetime="${S.toISOString()}" itemprop="datePublished">${O}</time>
        <div class="tags">
          ${f.Tags.map(T=>`<span class="tag">#${T}</span>`).join("")}
        </div>`),l(1,o=f.Html),l(2,m=await Q())}function c(){A("/new/?edit="+n.slug)}function e(){if(confirm("Are you sure you want to delete this post?")){let a=H();fetch(`${w}/blog/`+n.slug,{method:"DELETE",headers:{Token:a??""}}).then(()=>{A("/blog")})}}return i.$$set=t=>{"data"in t&&l(5,n=t.data)},i.$$.update=()=>{i.$$.dirty&32&&(async()=>(await r(n.slug),R()))()},[u,o,m,c,e,n]}class lt extends P{constructor(s){super(),j(this,s,Y,X,L,{data:5})}}export{lt as component,nt as universal};
